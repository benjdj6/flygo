<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.10/angular.min.js"></script>
    <script type="text/javascript" src="/bower_components/angular-ui-unique/unique.js"></script>
    <script src="/javascripts/angularApp.js"></script>
  </head>
  <body ng-app="flygo" ng-controller="MainCtrl">
    <div class="container-fluid">
      <div class="row nav">
        <h1><%= title %></h1>
        <p>Welcome to <%= title %></p>
      </div>

      <div class="row">
        <form ng-submit="getDestinations();">
          <div class="row">
            <label>Departing Airport: </label>
            <input type="text" placeholder="JFK" ng-model="origin"/>
            <label>Budget (USD): </label>
            <input type="number" min="0" placeholder="100" ng-model="budget"/>
            <label>Alliance</label>
            <select ng-model="alliance" ng-options="opt for opt in alliances">
              <option value="">None</option>
            </select>
            <input type="checkbox" ng-model="domestic">Domestic Only</input>
          </div>

          <div class="row">
            <label>Departure Date: </label>
            <input type="date" ng-model="depart"/>
            <label>Trip Length: </label>
            <input type="number" ng-model="triplength" min="0"/>
            <!-- Temporarily removed while figuring out data source
            <label>Max Layover (minutes): </label>
            <input type="number" min="0" placeholder="45" ng-model="layover"/>
            -->
            <input type="checkbox" ng-model="milerun">Mileage Run</input>
          </div>

          <!-- Temporarily removed while working on ng-models
          <div class="row">
            <label>Continents</label>
            <input type="checkbox">Africa</input>
            <input type="checkbox">Asia</input>
            <input type="checkbox">Australia</input>
            <input type="checkbox">Europe</input>
            <input type="checkbox">North America</input>
            <input type="checkbox">South America</input>
          </div>
          -->

          <div class="row">
            <button class="btn brn-default" ng-show="selected" ng-click="selected = false; destination = null">Back</button>
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>
        </form>
      </div>
      <div ng-repeat="destination in destinations" ng-hide="selected || milerun">
        <div class="row destinations" ng-class-even="'even'">
          {{destination.DestinationLocation}}, {{destination.DestinationCountry}} for ${{destination.FareData[0].MinimumFare}}
        </div>
      </div>
      <div ng-repeat="flight in flights | filter: filters() | orderBy: 'PricePerMile' | unique: 'DestinationLocation'" ng-show="!selected && milerun">
        <div class="row destinations" ng-class-even="'even'" ng-show="{{flight.LowestFare.Fare}}" ng-click="showDestination(flight.DestinationLocation)">
          {{flight.DestinationLocation}} for ${{flight.PricePerMile}} per mile
        </div>
      </div>
      <div ng-show="selected">
        <div ng-repeat="flight in flights | filter: filters() | orderBy: 'LowestFare.Fare'">
          <div class="row destinations" ng-class-even="'even'" ng-show="{{flight.LowestFare.Fare}}">
            ${{flight.LowestFareText}} with {{flight.LowestFare.AirlineName}} on {{flight.DepartureDateText}}
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
